---
layout: post
title: "Restore postgresql database"
description: ""
category: [postgres]
tags: [restore, pg_dump, psql]
---
{% include JB/setup %}

The backup is created with pg_dump.

    pg_dump -Fc -h "$HOSTNAME" -U "$USERNAME" "$DATABASE" -f $FINAL_BACKUP_DIR"$DATABASE"

To restore it:

Decompress file

    gunzip <gz file>

Asure owner is the same that in the file

    createdb -U <owner> <database name>

Edit the sql file to change "Owner"'s name to the postgres superuser name.

    cp file file.bak
    sed 's/old_awner/new_owner/' file.bak > file
    rm file.bak

Import database

    psql -U new_owner -d <database> -f <sql file created with pg_dump>

