---
layout: post
title: "Restore postgresql database"
description: ""
category: [postgres]
tags: [restore, pg_dump, psql]
---
{% include JB/setup %}

The backup is created with pg_dump.

    pg_dump -Fc -h "$HOSTNAME" -U "$USERNAME" "$DATABASE" -f $FINAL_BACKUP_DIR"$DATABASE"

To restore it:

    gunzip <gz file>
    createdb -U <postgres user> <database name>

Edit the sql file to change "Owner"'s name to the postgres superuser name.
    cp file file.bak
    sed 's/string/string2/' file.bak > file
    rm file.bak

    psql -U <postgres user> -d <database> -f <sql file created with pg_dump> -W
      -W force asking for pw
